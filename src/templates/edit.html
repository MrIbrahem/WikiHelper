{% extends "base.html" %}

{% block title %}Edit {{ slug }} - Wiki Ref Manager{% endblock %}

{% block content %}
<h1>Edit Workspace: <code>{{ slug }}</code></h1>

<p class="breadcrumb">
    <a href="{{ url_for('index') }}">Home</a> &raquo; 
    <a href="{{ url_for('browse_workspace', slug=slug) }}">{{ slug }}</a> &raquo; 
    Edit
</p>

<form method="POST" class="edit-form">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    
    <div class="form-group">
        <label for="editable_content">Editable Content (editable.wiki)</label>
        <small>
            Edit the text below. References have been replaced with placeholders like [ref1], [ref2], etc.
            Keep these placeholders if you want to preserve the references.
        </small>
        <textarea id="editable_content" name="editable_content" rows="25" 
                  class="editor">{{ editable_content }}</textarea>
    </div>

    <div class="form-actions">
        <button type="submit" class="btn btn-primary">Save &amp; Restore References</button>
        <a href="{{ url_for('browse_workspace', slug=slug) }}" class="btn btn-secondary">Browse Files</a>
    </div>
</form>

{% if restored_content %}
<div class="preview-section">
    <h2>Preview: Restored Content (restored.wiki)</h2>
    <small>This is the result after restoring the reference placeholders.</small>
    <pre class="preview-content">{{ restored_content }}</pre>
</div>
{% endif %}
{% endblock %}
