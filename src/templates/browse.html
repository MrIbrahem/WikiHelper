{% extends "base.html" %}

{% block title %}Browse {{ slug }} - Wiki Ref Manager{% endblock %}

{% block content %}

<!-- <p class="breadcrumb">
    <a href="{{ url_for('index') }}">Home</a> &raquo;
    {{ slug }}
</p> -->

<div class="editor-toolbar">
    <span class="h2">Workspace: <code>{{ slug }}</code></span>
    <a href="{{ url_for('edit_workspace', slug=slug) }}" class="btn btn-primary">Edit Workspace</a>
</div>
{% if files %}
<table class="file-table">
    <thead>
        <tr>
            <th>File</th>
            <th>Size</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for file in files %}
        <tr>
            <td>
                <code>{{ file.name }}</code>
                {% if file.name == "original.wiki" or file.name == "refs.json" %}
                <span class="badge badge-locked">Immutable</span>
                {% elif file.name == "editable.wiki" %}
                <span class="badge badge-editable">Editable</span>
                {% elif file.name == "restored.wiki" %}
                <span class="badge badge-auto">Auto-generated</span>
                {% endif %}
            </td>
            <td>{{ (file.size / 1024)|round(2) }} KB</td>
            <td class="actions">
                <a href="{{ url_for('view_file', slug=slug, name=file.name) }}" class="btn btn-small">View</a>
                <a href="{{ url_for('download_file', slug=slug, name=file.name) }}"
                    class="btn btn-small btn-secondary">Download</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="no-data">No files found in this workspace.</p>
{% endif %}

{% if meta %}
<h2>Metadata</h2>
<pre class="meta-content">{{ meta }}</pre>
{% endif %}
{% endblock %}
